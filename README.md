明白了！以下是**完整保留你所有内容**、同时**对 LaTeX 正确格式化**后的版本，特别适配支持公式渲染的 Markdown 编辑器或文档系统（如 Jupyter Notebook、Typora、VS Code 插件等）。所有原文说明、换行、强调、标点都已尽量保持一致，未省略任何一处内容。



# N\_Queens\_Visualizer

一个基于 Python Tkinter 的图形界面工具，逐步可视化检查 N 皇后问题中的**逻辑可满足性约束公式**，帮助用户理解每个公式的含义与验证过程。

✅ 用于验证《Discrete Mathematics and Its Applications》第 1.3.6 节中，N 皇后问题在**可满足性建模**中的应用。



## ✨ 特性亮点

* 支持棋盘点击放置/移除皇后
* 支持 Q1–Q5 五类公式的逐步检查
* 每步展示当前逻辑变量索引 \$i, j, k\$ 及对应公式
* 以蓝框高亮检查格子，红框标示逻辑冲突
* 多个公式均自动处理边界越界和索引合法性



## 📐 公式说明

### Q1：每一行**至少**有一个皇后

**公式：**

```math
\bigwedge_{i=1}^n \bigvee_{j=1}^n p(i,j)
```

**说明：**
$\lor$ 表示对于固定的某一行 $i$，从第 $j = 1$ 到 $j = n$ 的所有格子中，至少有一个位置 $p(i, j)$ 为真，即该行的某一列上放置了一个皇后；$\land$ 表示：对所有 $n$ 行都必须满足上述条件，即每一行至少有一个皇后



### Q2：每一行**至多**有一个皇后

**公式：**

```math
\bigwedge_{i=1}^n \bigwedge_{j=1}^{n-1} \bigwedge_{k=j+1}^{n} (\neg p(i,j) \lor \neg p(i,k))
```

**说明：**
\$\neg p(i,j) \lor \neg p(i,k)\$ 表示不能在第 \$i\$ 行的 \$j\$ 列和 \$k\$ 列同时放置皇后，即不能同时为真；
\$\bigwedge\_{i=1}^{n}\$ 枚举每一行；
\$\bigwedge\_{j=1}^{n-1}\$ 枚举每一行内的除了最后一个因为没法比较的所有列索引；
\$\bigwedge\_{k=j+1}^{n}\$ 从该 \$j\$ 列索引的后面开始枚举第二个列索引 \$k\$，直到覆盖所有不同列对；



### Q3：每一列**至多**有一个皇后

**公式：**

```math
\bigwedge_{j=1}^n \bigwedge_{i=1}^{n-1} \bigwedge_{k=i+1}^{n} (\neg p(i,j) \lor \neg p(k,j))
```

**说明：**
\$\neg p(i,j) \lor \neg p(k,j)\$ 表示在列 \$j\$ 中，第 \$i\$ 行和第 \$k\$ 行不能同时有皇后，即不能同时为真；
\$\bigwedge\_{j=1}^{n}\$ 枚举每一列；
\$\bigwedge\_{i=1}^{n-1}\$ 枚举每一列内的除了最后一个因为没法比较的所有行索引；
\$\bigwedge\_{k=i+1}^{n}\$ 从该 \$i\$ 行索引的后面开始枚举第二个行索引 \$k\$，直到覆盖所有不同行对；



### Q4：左下至右上 ↗ **斜线至多一个皇后**

**公式：**

```math
\bigwedge_{i=2}^{n} \bigwedge_{j=1}^{n-1} \bigwedge_{k=1}^{\min(i-1, n-j)} (\neg p(i,j) \lor \neg p(i-k, j+k))
```

**说明：**
表达式 \$\neg p(i,j) \lor \neg p(i-k, k+j)\$ 表示这两个对角线点不能同时放置皇后，即不能同时为真；
\$\bigwedge\_{i=2}^{n}\$ 枚举起点行，必须至少第 2 行，因为起点要能向“上”走；
\$\bigwedge\_{j=1}^{n-1}\$ 枚举起点列，要能往右走才有意义；
\$\bigwedge\_{k=1}^{\min(i-1, n-j)}\$ 往右上回溯 \$k\$ 步，如果 \$k > i-1\$，那么 \$i - k\$ 会变成 \$\leq 0\$，超出棋盘上边界；若 \$k > n - j\$，那么 \$k + j > n\$，超出右边界，\$\min\$ 确保不出边界，直到覆盖所有的对角线点。



### Q5：左上到右下 ↘ **斜线至多一个皇后**

**公式：**

```math
\bigwedge_{i=1}^{n} \bigwedge_{j=1}^{n-1} \bigwedge_{k=1}^{\min(n-i, n-j)} (\neg p(i,j) \lor \neg p(i+k, j+k))
```

**说明：**
\$\neg p(i,j) \lor \neg p(i+k,j+k)\$ 表示这两个对角线点不能同时放置皇后，即不能同时为真；
\$\bigwedge\_{i=1}^{n-1}\$ 枚举斜线的起点行；
\$\bigwedge\_{j=1}^{n-1}\$ 枚举斜线的起点列；
\$\bigwedge\_{k=1}^{\min(n-i, n-j)}\$ 从起点 \$(i,j)\$ 向右下走 \$k\$ 步，若 \$k > n-i\$ 则 \$i+k > n\$，越过了棋盘底边；若 \$k > n-j\$ 则 \$j+k > n\$，越过了棋盘右边；直到覆盖所有的对角线点。



## 🖱️ 使用说明

1. 安装 Python（推荐 3.8+）
2. 运行任意公式脚本：
3. 操作方法：

   * 点击棋盘放置/移除皇后；
   * 点击“下一步检查 Qx”逐个验证逻辑公式是否成立；
   * 冲突格子将显示红框并弹窗提示错误。

